<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House of Virgin Mary Tour Booking</title>
    <link rel="stylesheet" href="house-of-virgin-mary-tour.css" />
    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="logo">
        </div>
        <div class="hotel-name">
            <h1>Katelya Hotel</h1>
        </div>
        <nav>
            <!-- Return button with icon -->
            <button class="return-btn" onclick="window.location.href='../Tours-Service.html'">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 12H5"></path>
                    <path d="M12 19l-7-7 7-7"></path>
                </svg>
                <span>Back</span>
            </button>
            
            <!-- Language Dropdown -->
            <div class="language-dropdown">
                <button class="dropdown-btn">
                    <span id="current-language">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                    <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
                <div class="dropdown-content">
                    <a href="#" id="ar-option" class="active">
                        <span class="lang-flag">ðŸ‡¦ðŸ‡ª</span>
                        <span class="lang-name">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                    </a>
                    <a href="#" id="en-option">
                        <span class="lang-flag">ðŸ‡¬ðŸ‡§</span>
                        <span class="lang-name">English</span>
                    </a>
                </div>
            </div>
        </nav>
    </header>
    <!-- Main Content -->
    <main>
        <section id="service-explanation">
            <h2>House of Virgin Mary & Ancient Ephesus Tour</h2>
            <p>
                Embark on a spiritually and historically enriching journey to Ephesus and the House of Virgin Mary, one of Christianity's most revered pilgrimage sites. This comprehensive tour takes you through the magnificent ruins of ancient Ephesus and to the humble house where the Virgin Mary is believed to have spent her final years.
            </p>
            <p>
                <strong>Tour Highlights:</strong>
            </p>
            <ul>
                <li><strong>House of Virgin Mary (Meryemana)</strong> - Visit this sacred site recognized by the Vatican where the Virgin Mary is believed to have lived her last days</li>
                <li><strong>Ancient Ephesus</strong> - Explore one of the world's best-preserved ancient cities with highlights including:
                    <ul>
                        <li>The magnificent Library of Celsus</li>
                        <li>The Great Theater that could seat 25,000 spectators</li>
                        <li>Temple of Hadrian</li>
                        <li>Marble Street and Agora (ancient marketplace)</li>
                        <li>Roman Terraced Houses (optional)</li>
                    </ul>
                </li>
                <li><strong>Basilica of St. John</strong> - Visit the church built over the believed burial site of St. John the Apostle</li>
                <li><strong>Temple of Artemis</strong> - See the remains of one of the Seven Wonders of the Ancient World</li>
                <li><strong>Traditional Turkish Lunch</strong> - Enjoy authentic local cuisine at a carefully selected restaurant</li>
                <li><strong>Local Crafts Demonstration</strong> - Opportunity to observe traditional carpet weaving or pottery making (time permitting)</li>
            </ul>
            <p>
                <strong>Tour Options:</strong> 
            </p>
            <p>
                <strong>1. Day Trip by Flight (Same Day Return):</strong> Includes morning flight from Istanbul to Izmir, full-day tour, and evening return flight.
            </p>
            <p>
                <strong>2. Overnight Tour (2 Days):</strong> Includes flights, tour, accommodation in Kusadasi or SelÃ§uk, and additional time to explore the region.
            </p>
            <p>
                <strong>Duration:</strong>
            </p>
            <p>Day Trip: Approximately 15 hours (including flights)<br>
               Overnight Tour: 2 days, 1 night
            </p>
            <p>
                <strong>Departure Time:</strong> Early morning flight from Istanbul (typically 6:00-7:00 AM)
            </p>
            <p>
                <strong>Return Time:</strong>
            </p>
            <p>Day Trip: Late evening flight to Istanbul (typically 8:00-9:00 PM)<br>
               Overnight Tour: Evening flight on the second day
            </p>
            <p>
                <strong>Price:</strong>
            </p>
            <p>Day Trip: 290 USD per person (minimum 2 persons)<br>
               Overnight Tour: 390 USD per person (minimum 2 persons)
            </p>
            <p>
                <strong>Included:</strong> Hotel pickup and drop-off, round-trip domestic flights Istanbul-Izmir-Istanbul, air-conditioned vehicle, professional English-speaking guide, entrance fees to all mentioned sites (except Roman Terraced Houses), lunch, and bottled water. Overnight option also includes hotel accommodation and breakfast.
            </p>
            <p>
                <strong>Not Included:</strong> Entrance to Roman Terraced Houses (approximately 15 USD), personal expenses, additional meals not specified, and gratuities
            </p>
            <p>
                <strong>What to Bring:</strong> Comfortable walking shoes, modest clothing (shoulders and knees should be covered when visiting the House of Virgin Mary), sun protection, camera, and passport/ID for domestic flights
            </p>
            <p>
                This tour offers a perfect blend of spiritual significance and ancient history, providing insights into both early Christianity and the grandeur of the Roman Empire. Book now to secure your spot for this unforgettable experience!
            </p>
        </section>
        <!-- Booking Form Section -->
        <section id="booking-form">
            <h3>Book Your House of Virgin Mary & Ancient Ephesus Tour</h3>
            <form id="bookingForm" onsubmit="sendToWhatsApp(event)">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" required>
                
                <label for="tour-type">Tour Option:</label>
                <select id="tour-type" name="tour-type" required>
                    <option value="day-trip">Day Trip (Same Day Return) - 290 USD/person</option>
                    <option value="overnight">Overnight Tour (2 Days, 1 Night) - 390 USD/person</option>
                </select>
                
                <!-- Date and Time Inputs -->
                <div class="datetime-container">
                    <div>
                        <label for="date">Date:</label>
                        <input type="text" id="date" name="date" placeholder="Select date" required>
                    </div>
                    <div>
                        <label for="participants">Number of Participants:</label>
                        <input type="number" id="participants" name="participants" min="2" value="2" required>
                    </div>
                </div>

                <div class="checkbox-container">
                    <input type="checkbox" id="roman-houses" name="roman-houses">
                    <label for="roman-houses" class="checkbox-label">I'm interested in visiting the Roman Terraced Houses (additional 15 USD per person)</label>
                </div>
                
                <div class="checkbox-container">
                    <input type="checkbox" id="lunch-preference" name="lunch-preference">
                    <label for="lunch-preference" class="checkbox-label">I have dietary restrictions (please specify in notes)</label>
                </div>

                <label for="room">Room Number: <span class="optional-text">(Optional - only if you're staying at our hotel)</span></label>
                <input type="text" id="room" name="room">
                <label for="notes">Additional Notes:</label>
                <textarea id="notes" name="notes" rows="4" placeholder="Any dietary restrictions, special requirements or questions..."></textarea>
                <button type="submit">Book Now</button>
            </form>
            <script>
                // Initialize Flatpickr for date inputs
                document.addEventListener("DOMContentLoaded", function () {
                    // Date picker
                    flatpickr("#date", {
                        dateFormat: "Y-m-d", // Format as YYYY-MM-DD
                        minDate: "today", // Can't select past dates
                        disable: [
                            function(date) {
                                // Disable Mondays (assuming tour doesn't run these days)
                                return (date.getDay() === 1);
                            }
                        ],
                        locale: "en" // English localization
                    });
                });

                function sendToWhatsApp(event) {
                    event.preventDefault();
            
                    // Get form values
                    const name = document.getElementById('name').value;
                    const phone = document.getElementById('phone').value;
                    const tourType = document.getElementById('tour-type').value;
                    const tourTypeName = tourType === 'day-trip' ? 'Day Trip (Same Day Return)' : 'Overnight Tour (2 Days, 1 Night)';
                    const date = document.getElementById('date').value;
                    const participants = document.getElementById('participants').value;
                    const romanHouses = document.getElementById('roman-houses').checked;
                    const hasDietaryRestrictions = document.getElementById('lunch-preference').checked;
                    const room = document.getElementById('room').value || 'Not staying at hotel';
                    const notes = document.getElementById('notes').value;
                    
                    // Calculate total price
                    const basePricePerPerson = tourType === 'day-trip' ? 290 : 390; // USD
                    const romanHousesPrice = romanHouses ? 15 * participants : 0;
                    const baseTotal = basePricePerPerson * participants;
                    const totalPrice = baseTotal + romanHousesPrice;
            
                    // Construct the message
                    const message = `
                        New House of Virgin Mary & Ancient Ephesus Tour Booking:
                        Name: ${name}
                        Phone: ${phone}
                        Tour Option: ${tourTypeName}
                        Date: ${date}
                        Number of Participants: ${participants}
                        Roman Terraced Houses: ${romanHouses ? 'Yes (+$' + romanHousesPrice + ' USD)' : 'No'}
                        Dietary Restrictions: ${hasDietaryRestrictions ? 'Yes' : 'No'}
                        Base Tour Price: $${baseTotal} USD
                        Total Price: $${totalPrice} USD
                        Room Number: ${room}
                        Additional Notes: ${notes || 'No notes provided'}
                    `.trim().replace(/\n/g, '%0A'); // Replace newlines with %0A for URL encoding
            
                    // Log the message for debugging
                    console.log('Message:', message);
            
                    // CallMeBot API details
                    const phoneNumber = '+905522830176'; // Your WhatsApp number
                    const apiKey = '8055273'; // Your CallMeBot API key
                    const url = `https://api.callmebot.com/whatsapp.php?phone=${encodeURIComponent(phoneNumber)}&text=${encodeURIComponent(message)}&apikey=${apiKey}`;
            
                    // Log the final URL for debugging
                    console.log('API URL:', url);
            
                    // Open the API link in a new tab
                    const newTab = window.open(url, '_blank');
            
                    // Close the tab and redirect after 500ms (0.5 seconds)
                    setTimeout(() => {
                        if (newTab) {
                            newTab.close(); // Close the API tab
                        }
                        window.location.href = "../thank-you.html"; // Redirect to the thank-you page
                    }, 500); // Wait 0.5 seconds
                }
            </script>
            <script>
                // Language dropdown functionality
                const dropdownBtn = document.querySelector('.dropdown-btn');
                const languageDropdown = document.querySelector('.language-dropdown');
                const currentLanguage = document.getElementById('current-language');
                const arOption = document.getElementById('ar-option');
                const enOption = document.getElementById('en-option');
                const returnButton = document.querySelector('.return-btn span'); // Get the span inside return button
                
                // Set initial language based on current URL
                function setInitialLanguage() {
                    // Check if we're in an English folder path
                    if (window.location.pathname.includes('/en/')) {
                        selectLanguage('en', 'English', false); // false means don't redirect
                    } else {
                        selectLanguage('ar', 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', false); // false means don't redirect
                    }
                }
                
                // Call this when the page loads
                setInitialLanguage();
                
                // Toggle dropdown display when clicking the button
                dropdownBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    languageDropdown.classList.toggle('open');
                });
            
                // Close dropdown when clicking outside
                document.addEventListener('click', function() {
                    languageDropdown.classList.remove('open');
                });
            
                // Handle language selection
                arOption.addEventListener('click', function(e) {
                    e.preventDefault();
                    const langText = this.getAttribute('data-lang-text');
                    const returnText = this.getAttribute('data-return-text');
                    selectLanguage('ar', langText, true, returnText);
                });
            
                enOption.addEventListener('click', function(e) {
                    e.preventDefault();
                    const langText = this.getAttribute('data-lang-text');
                    const returnText = this.getAttribute('data-return-text');
                    selectLanguage('en', langText, true, returnText);
                });
            
                function selectLanguage(lang, displayText, shouldRedirect = true, returnText = null) {
                    // Update button text
                    currentLanguage.textContent = displayText;
                    
                    // Update return button text if provided
                    if (returnText && returnButton) {
                        returnButton.textContent = returnText;
                    }
                    
                    // Update active class
                    if (lang === 'ar') {
                        arOption.classList.add('active');
                        enOption.classList.remove('active');
                    } else {
                        enOption.classList.add('active');
                        arOption.classList.remove('active');
                        document.dir = 'ltr'; // Set direction to LTR for English
                    }
                    
                    // Close the dropdown
                    languageDropdown.classList.remove('open');
                    
                    // Redirect to appropriate language version if shouldRedirect is true
                    if (shouldRedirect) {
                        redirectToLanguageFolder(lang);
                    }
                }
            
                // Function to handle language switching
                function redirectToLanguageFolder(language) {
                    // Get current URL path
                    const currentPath = window.location.pathname;
                    let newPath;
                    
                    if (language === 'en') {
                        // If current path has /ar/ replace it with /en/
                        if (currentPath.includes('/ar/')) {
                            newPath = currentPath.replace('/ar/', '/en/');
                        } else {
                            // If we're at the root level
                            newPath = 'house-of-virgin-mary-tour.html';
                        }
                    } else if (language === 'ar') {
                        // If current path has /en/ replace it with /ar/
                        if (currentPath.includes('/en/')) {
                            newPath = currentPath.replace('/en/', '/ar/');
                        } else {
                            // If we're at the root level
                            newPath = 'house-of-virgin-mary-tour.html';
                        }
                    }
                    
                    window.location.href = newPath;
                }
            </script>
            <!-- Flatpickr JS -->
            <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        </section>
    </main>
</body>
</html>